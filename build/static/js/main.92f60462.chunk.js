(this.webpackJsonpstickytodo_frontend=this.webpackJsonpstickytodo_frontend||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(8),i=a.n(s),r=(a(14),a(2)),l=a(3),c=a(4),d=a(1),u=a(6),p=a(5),h=(a(15),a(16),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={task_id:null,info:"",completed:!1,belongsToNote:null,needInfoUpdate:!1,beingEdited:!1},n.getTasks=n.getTasks.bind(Object(d.a)(n)),n.updateTaskProps=n.updateTaskProps.bind(Object(d.a)(n)),n.getTasks=n.getTasks.bind(Object(d.a)(n)),n.getCookie=n.getCookie.bind(Object(d.a)(n)),n.showInfo=n.showInfo.bind(Object(d.a)(n)),n.startEdit=n.startEdit.bind(Object(d.a)(n)),n.getCookie=n.getCookie.bind(Object(d.a)(n)),n.updateEditTask=n.updateEditTask.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"updateEditTask",value:function(e){e.preventDefault();var t=e.target[0].value;this.props.updateTask(this.state.task_id,t),this.setState({beingEdited:!1,needInfoUpdate:!0})}},{key:"getCookie",value:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}},{key:"updateTaskProps",value:function(){this.state.task_id==this.props.task_id&&this.state.info==this.props.info&&this.state.belongsToNote==this.state.belongsToNote||this.setState({task_id:this.props.task_id,info:this.props.info,completed:this.state.beingEdited,belongsToNote:this.props.belongsToNote,needInfoUpdate:!0})}},{key:"getTasks",value:function(){var e=this;if(this.state.needInfoUpdate){var t="http://127.0.0.1:8000/get-task/".concat(this.state.task_id,"/");fetch(t).then((function(e){return e.json()})).then((function(t){return e.setState({task_id:t.id,info:t.info,completed:t.completed,belongsToNote:t.belongsToNote,needInfoUpdate:!1})}))}}},{key:"changeComplete",value:function(){console.log("clicked"),this.setState({completed:!this.state.completed})}},{key:"showInfo",value:function(){var e;return this.state.beingEdited?o.a.createElement("div",{className:"task-wrapper flex-wrapper"},o.a.createElement("form",{onSubmit:this.updateEditTask,id:"form"},o.a.createElement("div",null,o.a.createElement("input",(e={id:"title",className:"form-control",type:"text"},Object(r.a)(e,"type","title"),Object(r.a)(e,"name","title"),Object(r.a)(e,"placeholder",this.state.info),Object(r.a)(e,"required",!0),e))),o.a.createElement("div",null,o.a.createElement("input",{value:"Submit Edit",id:"submit",className:"btn",type:"submit",name:"submit"})))):!0===this.state.completed?o.a.createElement("strike",{class:"note"},this.state.info):o.a.createElement("span",{class:"note"},this.state.info)}},{key:"startEdit",value:function(){console.log("edit clicked"),this.setState({beingEdited:!this.state.beingEdited})}},{key:"render",value:function(){var e=this;return this.updateTaskProps(),this.getTasks(),o.a.createElement("div",{className:"task-wrapper flex-wrapper"},o.a.createElement("div",{onClick:function(){return e.changeComplete()},style:{flex:7}},this.showInfo()),o.a.createElement("div",{style:{flex:1}},o.a.createElement("button",{onClick:function(){return e.startEdit()},class:"btn edit"},"Edit")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("button",{onClick:function(){return e.props.deleteItem(e.state.task_id)},class:"btn delete"},"Delete"," ")))}}]),a}(o.a.Component)),m=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={note_id:null,title:"",belongsToBoard:null,needTasksUpdate:!1,tasksList:[],addingTask:!1},n.getTasks=n.getTasks.bind(Object(d.a)(n)),n.updateNoteProps=n.updateNoteProps.bind(Object(d.a)(n)),n.getCookie=n.getCookie.bind(Object(d.a)(n)),n.createTask=n.createTask.bind(Object(d.a)(n)),n.deleteItem=n.deleteItem.bind(Object(d.a)(n)),n.updateTask=n.updateTask.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"updateTask",value:function(e,t){var a=this,n="http://127.0.0.1:8000/update-task/".concat(e,"/");fetch(n,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({id:e,info:t,completed:!1,belongsToNote:this.state.note_id})}).then((function(){console.log("update went through?"),a.setState({needTasksUpdate:!0})})).catch((function(e){console.log("caught error updating task =",e)}))}},{key:"deleteItem",value:function(e){var t=this,a=e,n=this.getCookie("csrftoken"),o="http://127.0.0.1:8000/delete-task/".concat(a,"/");fetch(o,{method:"DELETE",headers:{"Content-type":"application/json","X-CSRFToken":n}}).then((function(){return t.setState({needTasksUpdate:!0})}))}},{key:"getCookie",value:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}},{key:"updateNoteProps",value:function(){this.state.note_id==this.props.note_id&&this.state.title==this.props.title&&this.state.belongsToBoard==this.props.belongsToBoard||this.setState({note_id:this.props.note_id,title:this.props.title,belongsToBoard:this.props.belongsToBoard,needTasksUpdate:!0,tasksList:[]})}},{key:"getTasks",value:function(){var e=this;if(this.state.needTasksUpdate){var t="http://127.0.0.1:8000/list-tasks/".concat(this.state.note_id,"/");fetch(t).then((function(e){return e.json()})).then((function(t){return e.setState({tasksList:t,needTasksUpdate:!1})}))}}},{key:"createTask",value:function(e){var t=this;e.preventDefault();var a=e.target[0].value,n=this.getCookie("csrftoken"),o=this.state.note_id;console.log("note id =",o,"info = ",a,"complete = ",!1),fetch("http://127.0.0.1:8000/create-task/",{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":n},body:JSON.stringify({belongsToNote:o,info:a,completed:!1})}).then((function(e){return e.json()})).then((function(e){return t.setState({needTasksUpdate:!0})}))}},{key:"render",value:function(){var e;this.updateNoteProps(),this.getTasks();var t=this.state.tasksList,a=this;return o.a.createElement("div",null,o.a.createElement("div",{class:"note-title"},this.state.title,o.a.createElement("div",{className:"task-wrapper flex-wrapper"},o.a.createElement("form",{onSubmit:this.createTask,id:"form"},o.a.createElement("div",null,o.a.createElement("input",(e={id:"title",className:"form-control",type:"text"},Object(r.a)(e,"type","title"),Object(r.a)(e,"name","title"),Object(r.a)(e,"placeholder","Enter new task"),Object(r.a)(e,"required",!0),e))),o.a.createElement("div",null,o.a.createElement("input",{value:"Add Task",id:"submit",className:"btn",type:"submit",name:"submit"}))))),t.reverse().map((function(e,t){return o.a.createElement(h,{key:t,updateTask:a.updateTask,deleteItem:a.deleteItem,task_id:e.id,info:e.info,completed:e.completed,belongsToNote:e.belongsToNote})})))}}]),a}(o.a.Component),b=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={board_id:null,owner_id:null,needNotesUpdate:!1,notesList:[],editing:!1},n.getNotes=n.getNotes.bind(Object(d.a)(n)),n.updateProps=n.updateProps.bind(Object(d.a)(n)),n.createNote=n.createNote.bind(Object(d.a)(n)),n.getCookie=n.getCookie.bind(Object(d.a)(n)),n.deleteNote=n.deleteNote.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"deleteNote",value:function(e){var t=this,a=e,n=this.getCookie("csrftoken"),o="http://127.0.0.1:8000/delete-note/".concat(a,"/");fetch(o,{method:"DELETE",headers:{"Content-type":"application/json","X-CSRFToken":n}}).then((function(){return t.setState({needNotesUpdate:!0})}))}},{key:"getCookie",value:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}},{key:"updateProps",value:function(){this.state.owner_id==this.props.owner_id&&this.state.board_id==this.props.board_id||this.setState({board_id:this.props.board_id,owner_id:this.props.owner_id,needNotesUpdate:!0})}},{key:"getNotes",value:function(){var e=this;if(this.state.needNotesUpdate)var t="http://127.0.0.1:8000/list-notes/".concat(this.state.board_id,"/");fetch(t).then((function(e){return e.json()})).then((function(t){return e.setState({notesList:t,needNotesUpdate:!1})}))}},{key:"createNote",value:function(e){var t=this;e.preventDefault();var a=e.target[0].value,n=this.getCookie("csrftoken"),o=this.state.board_id;console.log("title = ",a);fetch("http://127.0.0.1:8000/create-note/",{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":n},body:JSON.stringify({title:a,belongsToBoard:o})}).then((function(e){return e.json()})).then((function(e){return t.setState({needNotesUpdate:!0})}))}},{key:"render",value:function(){var e;this.updateProps(),this.getNotes();var t=this.state.notesList,a=this;return o.a.createElement("div",null,o.a.createElement("h3",{class:"boarder-title"},"This your Notebook"),o.a.createElement("div",{id:"newNote-form-wrapper"},o.a.createElement("form",{onSubmit:this.createNote,id:"form"},o.a.createElement("div",{className:"flex-wrapper"},o.a.createElement("div",null,o.a.createElement("input",(e={id:"title",className:"form-control",type:"text"},Object(r.a)(e,"type","title"),Object(r.a)(e,"name","title"),Object(r.a)(e,"placeholder","Enter new list title"),Object(r.a)(e,"required",!0),e))),o.a.createElement("div",null,o.a.createElement("input",{value:"Create New List",id:"submit",className:"btn",type:"submit",name:"submit"}))))),o.a.createElement("div",{class:"flex-container"},t.map((function(e,t){return o.a.createElement("div",null,o.a.createElement(m,{key:t,note_id:e.id,title:e.title,belongsToBoard:e.belongsToBoard}),o.a.createElement("button",{onClick:function(){return a.deleteNote(e.id)},class:"btn-delete-note"}," ","DELETE LIST"))}))))}}]),a}(o.a.Component),g=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={logged_in:!1,username:null,user_id:null,display:"home",needGetBoard:!1,needPropsUpdate:!1,boardList:null},n.getCookie=n.getCookie.bind(Object(d.a)(n)),n.render_Display=n.render_Display.bind(Object(d.a)(n)),n.set_display=n.set_display.bind(Object(d.a)(n)),n.handleRegister=n.handleRegister.bind(Object(d.a)(n)),n.handleLogin=n.handleLogin.bind(Object(d.a)(n)),n.handleLogout=n.handleLogout.bind(Object(d.a)(n)),n.login_logout=n.login_logout.bind(Object(d.a)(n)),n.createBoard=n.createBoard.bind(Object(d.a)(n)),n.getBoard=n.getBoard.bind(Object(d.a)(n)),n}return Object(c.a)(a,[{key:"getCookie",value:function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=a[n].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(e);var a=e.target[0].value,n=e.target[1].value;console.log(e.target[0].value),console.log(e.target[1].value);var o=this.getCookie("csrftoken");fetch("http://127.0.0.1:8000/register/",{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":o},body:JSON.stringify({username:a,email:"none",password:n})}).then((function(e){return e.json()})).then((function(){return t.setState({logged_in:!1,username:null,user_id:null,display:"reg_success",needGetBoard:!1,needPropsUpdate:!1,boardList:null})})).catch((function(e){console.log("ERROR occured in registration -> ",e),alert("An error occured during registration, please try again")}))}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault();var a=e.target[0].value,n=e.target[1].value;console.log(e.target[0].value),console.log(e.target[1].value);var o=this.getCookie("csrftoken");fetch("http://127.0.0.1:8000/login/",{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":o},body:JSON.stringify({username:a,password:n})}).then((function(e){return e.json()})).then((function(e){return t.setState({username:e.username,user_id:e.id,logged_in:!0,display:"login_success",boardList:null,needGetBoard:!0})})).catch((function(e){console.log(e),alert("An error occured during login, please try again")}))}},{key:"login_logout",value:function(){var e=this;return this.state.logged_in?o.a.createElement("a",{className:"nav-link",href:"#",onClick:function(){return e.handleLogout()}},"LOGOUT"):o.a.createElement("a",{className:"nav-link",href:"#",onClick:function(){return e.set_display("login")}},"LOGIN/REGISTER")}},{key:"handleLogout",value:function(){this.setState({logged_in:!1,display:"home",username:null,user_id:null,boardlist:null,needGetBoard:!1})}},{key:"set_display",value:function(e){this.setState({display:e})}},{key:"getBoard",value:function(){var e=this;if(this.state.needGetBoard)var t="http://127.0.0.1:8000/get-board/".concat(this.state.user_id,"/");fetch(t).then((function(e){return e.json()})).then((function(t){return e.setState({boardList:t,needGetBoard:!1})})).catch((function(e){return console.log("error getting board",e)}))}},{key:"createBoard",value:function(){var e=this,t=this.state.user_id,a=this.getCookie("csrftoken");fetch("http://127.0.0.1:8000/create-board/",{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":a},body:JSON.stringify({owner:t})}).then((function(e){return e.json()})).then((function(t){return e.setState({needGetBoard:!0})})).catch((function(e){return console.log("error creating board",e)}))}},{key:"render_Display",value:function(){var e=this;return"home"===this.state.display?null!==this.state.boardList&this.state.logged_in?(console.log(this.state.boardList),o.a.createElement("div",null,o.a.createElement(b,{board_id:this.state.boardList.id,owner_id:this.state.boardList.owner}))):this.state.logged_in&&null===this.state.boardList?o.a.createElement("div",{class:"car-body p-2"},o.a.createElement("h5",{class:"title text-xl-center font-weight-bold p-2"},"Logged in as - ",this.state.username),o.a.createElement("h3",{class:"title text-xl-center font-weight-bold p-2"},"You don't have a board yet"),o.a.createElement("div",{class:"bottom-container text-center"},o.a.createElement("div",{class:"btn",onClick:function(){return e.createBoard()}},"Click here to create your notebook"))):o.a.createElement("div",{class:"car-body p-4"},o.a.createElement("div",{class:"loginContainer bg-dark"},o.a.createElement("h5",null,"WELCOME!"),o.a.createElement("h2",null,"Please login or register to continue"),o.a.createElement("div",{class:"bottom-container text-center"},o.a.createElement("div",{class:"btn",onClick:function(){return e.set_display("login")}},"Go to login/register")))):"login"===this.state.display?o.a.createElement("div",null,o.a.createElement("div",{class:"card-body p-4"},o.a.createElement("h5",{class:"title text-xl-center font-weight-bold p-2"},"Login in"),o.a.createElement("div",{class:"loginContainer bg-dark"},o.a.createElement("form",{onSubmit:this.handleLogin,id:"form"},o.a.createElement("input",{type:"username",name:"username",placeholder:"Username",required:!0}),o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0}),o.a.createElement("input",{id:"submit",type:"submit",value:"Login",className:"btn"}),o.a.createElement("div",{class:"bottom-container text-center"},o.a.createElement("div",{onClick:function(){return e.set_display("register")},class:"btn"},"Register")))))):"register"===this.state.display?o.a.createElement("div",null,o.a.createElement("div",{class:"car-body p-4"},o.a.createElement("h5",{class:"title text-xl-center font-weight-bold p-2"},"Register"),o.a.createElement("div",{class:"loginContainer bg-dark"},o.a.createElement("form",{onSubmit:this.handleRegister,id:"form"},o.a.createElement("div",{className:"input-container"},o.a.createElement("input",{type:"username",name:"username",placeholder:"Username",required:!0}),o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",required:!0}),o.a.createElement("input",{id:"submit",type:"submit",value:"register",class:"btn"})))))):"login_success"===this.state.display?o.a.createElement("div",null,o.a.createElement("div",{class:"car-body p-4"},o.a.createElement("div",{class:"loginContainer bg-dark"},o.a.createElement("h5",{class:"title text-xl-center font-weight-bold p-2"},"Successfully Logged in"),o.a.createElement("div",{class:"bottom-container text-center"},o.a.createElement("div",{class:"btn",onClick:function(){return e.set_display("home")}},"Go to Home"))))):"reg_success"===this.state.display?o.a.createElement("div",null,o.a.createElement("div",{class:"car-body p-4"},o.a.createElement("h5",{class:"title text-xl-center font-weight-bold p-2"},"Successfully registered"),o.a.createElement("h5",{class:"title text-xl-center font-weight p-2"},"Please login to continue"),o.a.createElement("div",{class:"bottom-container text-center"},o.a.createElement("div",{class:"btn",onClick:function(){return e.set_display("login")}},"Go Login")))):void 0}},{key:"render",value:function(){var e=this;return this.getBoard(),o.a.createElement("div",null,o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark static-top navbar-collapse mb-5 shadow"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{class:"navbar-brand"},"Notebook "),o.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{class:"navbar-toggler-icon"})),o.a.createElement("div",{class:"navbar-brand ml-auto"}," ",this.state.username),o.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{class:"navbar-toggler-icon"})),o.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarResponsive"},o.a.createElement("ul",{class:"navbar-nav ml-auto"},o.a.createElement("li",{class:"nav-item "},o.a.createElement("a",{class:"nav-link",href:"#",onClick:function(){return e.set_display("home")}},"HOME")),o.a.createElement("li",{class:"nav-item"},this.login_logout()))))),this.render_Display())}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.92f60462.chunk.js.map